<?php

require 'vendor/autoload.php';

// import the Intervention Image Manager Class
use Intervention\Image\ImageManager;
use \Milon\Barcode\DNS1D;

// create an image manager instance with favored driver
$manager = new ImageManager(array('driver' => 'gd'));

$codes = ['5-000',
          '5-001',
          '5-002',
          '5-003',
          '5-004',
          '5-005',
          '5-006',
          '5-007',
          '5-008',
          '5-009',
          '5-010',
          '5-011',
          '5-012',
          '5-013',
          '5-014',
          '5-015',
          '5-016',
          '5-017',
          '5-018',
          '5-019',
          '5-020',
          '5-021',
          '5-022',
          '5-023',
          '5-024',
          '5-025',
          '5-026',
          '5-027',
          '5-028',
          '5-029',
          '5-030',
          '5-031',
          '5-032',
          '5-033',
          '5-034',
          '5-035',
          '5-036',
          '5-037',
          '5-038',
          '5-039',
          '5-040',
          '5-041',
          '5-042',
          '5-043',
          '5-044',
          '5-045',
          '5-046',
          '5-047',
          '5-048',
          '5-049',
          '5-050',
          '5-051',
          '5-052',
          '5-053',
          '5-054',
          '5-055',
          '5-056',
          '5-057',
          '5-058',
          '5-059',
          '5-060',
          '5-061',
          '5-062',
          '5-063',
          '5-064',
          '5-065',
          '5-066',
          '5-067',
          '5-068',
          '5-069',
          '5-070',
          '5-071',
          '5-072',
          '5-073',
          '5-074',
          '5-075',
          '5-076',
          '5-077',
          '5-078',
          '5-079',
          '5-080',
          '5-081',
          '5-082',
          '5-083',
          '5-084',
          '5-085',
          '5-086',
          '5-087',
          '5-088',
          '5-089',
          '5-090',
          '5-091',
          '5-092',
          '5-093',
          '5-094',
          '5-095',
          '5-096',
          '5-097',
          '5-098',
          '5-099',
          '5-100',
          '5-101',
          '5-102',
          '5-103',
          '5-104',
          '5-105',
          '5-106',
          '5-107',
          '5-108',
          '5-109',
          '5-110',
          '5-111',
          '5-112',
          '5-113',
          '5-114',
          '5-115',
          '5-116',
          '5-117',
          '5-118',
          '5-119',
          '5-120',
          '5-121',
          '5-122',
          '5-123',
          '5-124',
          '5-125',
          '5-126',
          '5-127',
          '5-128',
          '5-129',
          '5-130',
          '5-131',
          '5-132',
          '5-133',
          '5-134',
          '5-135',
          '5-136',
          '5-137',
          '5-138',
          '5-139',
          '5-140',
          '5-141',
          '5-142',
          '5-143',
          '5-144',
          '5-145',
          '5-146',
          '5-147',
          '5-148',
          '5-149',
          '5-150',
          '5-151',
          '5-152',
          '5-153',
          '5-154',
          '5-155',
          '5-156',
          '5-157',
          '5-158',
          '5-159',
          '5-160',
          '5-161',
          '5-162',
          '5-163',
          '5-164',
          '5-165',
          '5-166',
          '5-167',
          '5-168',
          '5-169',
          '5-170',
          '5-171',
          '5-172',
          '5-173',
          '5-174',
          '5-175',
          '5-176',
          '5-177',
          '5-178',
          '5-179',
          '5-180',
          '5-181',
          '5-182',
          '5-183',
          '5-184',
          '5-185',
          '5-186',
          '5-187',
          '5-188',
          '5-189',
          '5-190',
          '5-191',
          '5-192',
          '5-193',
          '5-194',
          '5-195',
          '5-196',
          '5-197',
          '5-198',
          '5-199',
          '5-200',
];

foreach($codes as $code) {
    $img = $manager->make(__DIR__.'\src\templates\template.png');
    $img->text($code, 2770, 2250, function ($font) {
        $font->file(__DIR__ . '\src\fonts\segoeuib.ttf');
        $font->size(55);
        $font->color('#000000');
        $font->align('center');
    });

    $img->text($code, 1800, 900, function ($font) {
        $font->file(__DIR__ . '\src\fonts\segoeuib.ttf');
        $font->size(500);
        $font->color('#E21D2C');
        $font->align('center');
        $font->valign('top');
    });

    $d = new DNS1D();
    $d->setStorPath(__DIR__ . '\cache\\');
    $img->insert('data:image/png;base64,' . $d->getBarcodePNG($code, "C39", 10, 350), 'bottom-right', 200, 300);

    $img->save(__DIR__ . '\src\generated\\'.$code.'.png');

    echo 'Generated: '.$code.PHP_EOL;
}